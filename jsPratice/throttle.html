<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button id="throttle">
        Throttle
    </button>
    <script>
        const button = document.getElementById('throttle');
        // const throttle = (func, limit) => {
        //     let inThrottle
        //     return function () {
        //         const args = arguments
        //         const context = this
        //         if (!inThrottle) {
        //             func.apply(context, args)
        //             inThrottle = true
        //             setTimeout(() => inThrottle = false, limit)
        //         }
        //     }
        // }
        // throttleBtn.addEventListener('click', throttle(function () {
        //     return console.log('Hey! It is', new Date().toUTCString());
        // }, 1000))
        const throttle = (func, delay) => {
            let last = 0;
            console.log('last', last)
            return (...args) => {
                const now = new Date().getTime();
                console.log(last, now)
                console.log(now - last, delay)
                if (now - last < delay) {
                    return;
                }
                last = now;
                return func(...args);
            }
        }
        button.addEventListener('click', throttle((e) => console.log('API Call'), 5000));
    </script>
</body>

</html>